# ftrace
**tracer for internal kernel function flow**
- `mount -t debugfs nodev /sys/kernel/debug`
```
root@6c7f37ea6051:/sys/kernel/debug# ls -l
total 0
drwxr-xr-x  2 root root 0 Oct 12 17:50 acpi
drwxr-xr-x  2 root root 0 Oct 12 17:50 aoe
drwxr-xr-x  2 root root 0 Oct 12 17:50 aufs
drwxr-xr-x 32 root root 0 Oct 12 17:51 bdi
drwxr-xr-x  2 root root 0 Oct 12 17:50 extfrag
-rw-r--r--  1 root root 0 Oct 12 17:50 fault_around_bytes
drwxr-xr-x  2 root root 0 Oct 12 17:50 hid
drwxr-xr-x  2 root root 0 Oct 12 17:50 kprobes
drwxr-xr-x  2 root root 0 Oct 12 17:50 nbd
drwxr-xr-x  2 root root 0 Oct 12 17:50 pm_qos
drwxr-xr-x  2 root root 0 Oct 12 17:50 regmap
-rw-r--r--  1 root root 0 Oct 12 17:50 sched_features
-r--r--r--  1 root root 0 Oct 12 17:50 sleep_time
--w-------  1 root root 0 Oct 12 17:50 split_huge_pages
-r--r--r--  1 root root 0 Oct 12 17:50 suspend_stats
dr-xr-xr-x  3 root root 0 Oct 12 17:50 tracing
drwxr-xr-x  2 root root 0 Oct 12 17:50 virtio-ports
-r--r--r--  1 root root 0 Oct 12 17:50 wakeup_sources
drwxr-xr-x  2 root root 0 Oct 12 17:50 x86

root@6c7f37ea6051:/sys/kernel/debug/tracing# cat current_tracer
nop
root@6c7f37ea6051:/sys/kernel/debug/tracing# cat available_tracers
blk mmiotrace function_graph function nop
```

- event tracing( interrupt, scheduling, filesystem ... )
- kernel function tracing( all of kernel function, call graph, stack usage )
- latency tracing( wakeup, wakeup_rt, irqsoff, preemptoff, preemptirqsoff )


# mcount hooking
**One of hooking mechnisms**
- complier level function -> ABI
- if compile with gcc -pg option, mcount brench code is inserted
- if developer can code some wanted routine in mcount function, hook is not hard.
- ftrace use this mechnism and, by revising mcount internal routine, it can trace 
internal kernel function.

